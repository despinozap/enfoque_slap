<!-- Loading -->
<div *ngIf="(loading === true)">
    <app-loading></app-loading>
</div>
<!-- Loading ends -->

<!-- start page title -->
<div class="row">
    <div class="col-12">
        <div class="page-title-box d-flex align-items-center justify-content-between">
            <h4 class="mb-0 font-size-18">Detalle de despacho</h4>

            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item">Despachos</li>
                    <li class="breadcrumb-item">Comprador</li>
                    <li class="breadcrumb-item active">Detalle</li>
                </ol>
            </div>

        </div>
    </div>
</div>
<!-- end page title -->

<div class="row">

    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div>
                    <span class="card-title">Despacho {{ despacho.id >= 0 ? "#" + despacho.id : '' }}</span>
                </div>
                <span class="badge badge-primary"></span>
                <p class="card-title-desc">Detalle del despacho</p>
                <div class="row">
                    <div class="col-4">
                        <div class="form-group">
                            <label class="control-label">Comprador</label>
                            <br>
                            <label>{{ despacho.comprador_name !== null ? despacho.comprador_name : '' }}</label>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <label class="control-label">Despachado en</label>
                            <br>
                            <label>{{ despacho.fecha !== null ? dateStringFormat(despacho.fecha) : '' }}</label>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <label class="control-label">Destino</label>
                            <br>
                            <label>{{ despacho.centrodistribucion_name !== null ? despacho.centrodistribucion_name : '' }}</label>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <label class="control-label">N° Documento</label>
                            <br>
                            <label>{{ despacho.ndocumento !== null ? despacho.ndocumento : '' }}</label>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <label class="control-label">Despachado por</label>
                            <br>
                            <label>{{ despacho.responsable !== null ? despacho.responsable : '' }}</label>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <label class="control-label">Comentario</label>
                            <br>
                            <label>{{ despacho.comentario !== null ? despacho.comentario : '' }}</label>
                        </div>
                    </div>
                </div>

                <hr>

                <!-- Partes list -->
                <div>
                    <h4 class="card-title">Lista de partes</h4>
                    <p class="card-title-desc">Lista de partes en el despacho</p>

                    <div class="table-responsive">

                        <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-hover table-bordered mb-2">
                            <thead>
                                <tr>
                                    <th>N° Parte</th>
                                    <th>Descripcion</th>
                                    <th>Marca</th>
                                    <th>OC Interna</th>
                                    <th>OC Cliente</th>
                                    <th>Faena</th>
                                    <th>Cantidad</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let parte of partes; index as i">
                                    <td align="center"><i class="bx bx-timer icon-table" *ngIf="(parte.backorder === true)"></i>{{ parte.nparte !== null ? parte.nparte : '' }}</td>
                                    <td align="center">{{ parte.descripcion !== null ? parte.descripcion : '' }}</td>
                                    <td align="center">{{ parte.marca_name !== null ? parte.marca_name : '' }}</td>
                                    <td align="center">{{ parte.oc_id !== null ? parte.oc_id : '' }}</td>
                                    <td align="center">{{ parte.oc_noccliente !== null ? parte.oc_noccliente : '' }}</td>
                                    <td align="center">{{ parte.faena_name !== null ? parte.faena_name : '' }}</td>
                                    <td align="center">{{ parte.cantidad !== null ? parte.cantidad : '' }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-buttons mt-2">
                            <button [disabled]="(loading === true)" class="btn btn-light" (click)="goTo_back()">
                <span>Volver</span>
              </button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!-- end card -->

    </div>

</div>
<!-- end row -->